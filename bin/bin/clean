#!/usr/bin/env bash

cd ~

read -p "
 Are you sure? This script will delete all files and folders that the creator
 thought of as unnecessary junk, and remove any unnecessary homebrew
 dependencies. Updates will also occur.

 This includes but is not limited to: caches, bash configs, hyper configs, less
 histories, netrw histories, terminfo folder, useless default folders and more.

 [Y/n]" -n 1 -r

echo    # (optional) move to a new line
if [[ $REPLY =~ ^[Yy]$ ]]
then
  echo "
   Now for the package manager clear-out!"

  pip3 freeze > requirements.txt
  pip3 uninstall -r requirements.txt -y
  rm requirements.txt

  "brew remove --force --ignore-dependencies $(brew list)"
  brew install exa
  brew install fzf
  brew install git
  brew install koekeishiya/formulae/khd
  brew install chunkwm
  brew install neovim
  brew install pandoc
  brew install python3
  brew install rmtrash
  brew install shellcheck
  brew install stow
  brew install tmux
  brew tap ValeLint/vale
  brew install vale
  brew install zsh
  brew tap crisidev/homebrew-chunkwm
  brew install --HEAD universal-ctags/universal-ctags/universal-ctags
  pip3 install neovim
  pip3 install vim-vint

  /usr/local/bin/rmtrash ~/.vim*
  /usr/local/bin/rmtrash ~/.less*
  /usr/local/bin/rmtrash ~/.cache
  /usr/local/bin/rmtrash ~/.bash*
  /usr/local/bin/rmtrash ~/.hyper*
  /usr/local/bin/rmtrash ~/.config/nvim/.netrwhist
  /usr/local/bin/rmtrash ~/.terminfo
  /usr/local/bin/rmtrash ~/.cups
  /usr/local/bin/rmtrash ~/.oracle*
  /usr/local/bin/rmtrash ~/*.ti

  if [ -n "$(ls -A ~/documents/*)" ]
  then
    echo "Contents rescued"
  else
    sudo rm -rf ~/documents
  fi
  if [ -n "$(ls -A ~/downloads/*)" ]
  then
    echo "Contents rescued"
  else
    sudo rm -rf ~/downloads
  fi
  if [ -n "$(ls -A ~/movies/*)" ]
  then
    echo "Contents rescued"
  else
    sudo rm -rf ~/movies
  fi
  if [ -n "$(ls -A ~/music/*)" ]
  then
    echo "Contents rescued"
  else
    sudo rm -rf ~/music
  fi
  if [ -n "$(ls -A ~/pictures/*)" ]
  then
    echo "Contents rescued"
  else
    sudo rm -rf ~/pictures
  fi

  if [ -n "$(ls -A ~/Documents/*)" ]
  then
    echo "Contents rescued"
  else
    sudo rm -rf ~/Documents
  fi
  if [ -n "$(ls -A ~/Downloads/*)" ]
  then
    echo "Contents rescued"
  else
    sudo rm -rf ~/Downloads
  fi
  if [ -n "$(ls -A ~/Movies/*)" ]
  then
    echo "Contents rescued"
  else
    sudo rm -rf ~/Movies
  fi
  if [ -n "$(ls -A ~/Music/*)" ]
  then
    echo "Contents rescued"
  else
    sudo rm -rf ~/Music
  fi
  if [ -n "$(ls -A ~/Pictures/*)" ]
  then
    echo "Contents rescued"
  else
    sudo rm -rf ~/Pictures
  fi

  sudo mv ~/Desktop ~/desktop
  sudo mv ~/Documents ~/documents
  sudo mv ~/Downloads ~/downloads
  sudo mv ~/Movies ~/movies
  sudo mv ~/Music ~/music
  sudo mv ~/Pictures ~/pictures

  sudo find / -name '.DS_Store' -type f -delete
  sudo find ~/box -name 'Icon*' -type f -delete

  echo "
   Here! Take a look at that *clean* home folder:"
  sleep 2
  cd ~
  ls -aGHl

else
  echo " Quitting script."
fi

