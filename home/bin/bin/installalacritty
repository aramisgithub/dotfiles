#!/usr/bin/env bash

##3 Install rustup
# curl https://sh.rustup.rs -sSf | sh

### Source modified shell files
# source ~/.zshrc
# source ~/.zprofile

### Clone source code and cd into it
git clone https://github.com/jwilm/alacritty.git ~/.alacrittytmp
cd ~/.alacrittytmp

### Ensure correct rust compiler is installed
rustup override set stable
rustup update stable

### Build application for macOS
make app
cp -r target/release/osx/Alacritty.app /Applications/

### Install zsh completions
sudo cp alacritty-completions.zsh /usr/share/zsh/functions/Completion/X/_alacritty

### Create default configuration
mkdir -pv ~/.config/alacritty
cp ~/.alacrittytmp/alacritty_macos.yml ~/.config/alacritty/alacritty.yml

### Go to home folder
cd ~

### Delete temporary alacritty source files
rm -rf ~/.alacrittytmp

### Open alacritty
open -na Alacritty

